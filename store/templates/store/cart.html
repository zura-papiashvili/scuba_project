<!-- cart.html -->
{% extends "base.html" %}

{% block content %}
    <h1>Your Cart</h1>
    <div class="cart-items">
        {% for item in cart_items %}
            <div class="cart-item">
                <h3>{{ item.product.name }}</h3>
                {% if item.variation %}
                    <p>Variation: {{ item.variation.name }}</p>
                {% endif %}
                <p>Quantity: 
                    <form method="post" action="{% url 'store:update_cart' item.id %}">
                        {% csrf_token %}
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" required>
                        <button type="submit">Update</button>
                    </form>
                </p>
                <p>Price: ${{ item.product.price }}</p>
                <form method="post" action="{% url 'store:update_cart' item.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="quantity" value="0">
                    <button type="submit">Remove</button>
                </form>
            </div>
        {% endfor %}
    </div>

    <h2>Total Price: ${{ total_price }}</h2>

    <form method="get" action="{% url 'store:checkout' %}">
        <button type="submit">Proceed to Checkout</button>
    </form>
{% endblock %}
